# 一、更新医院状态（接口）

## 1、添加service方法和实现

（1）在HospService定义方法

```java
void updateStatus(String id, Integer status);
```

（2）在HospServiceImpl实现方法

```java
@Override
public void updateStatus(String id, Integer status) {
    if(status.intValue() == 0 || status.intValue() == 1) {
        Hospital hospital = hospitalRepository.findById(id).get();
        hospital.setStatus(status);
        hospital.setUpdateTime(new Date());
        hospitalRepository.save(hospital);
    }
}
```

## 2、添加controller

在HospController添加方法

```java
@ApiOperation(value = "更新上线状态")
@GetMapping("updateStatus/{id}/{status}")
public R lock(
    @ApiParam(name = "id", value = "医院id", required = true)
    @PathVariable("id") String id,
    @ApiParam(name = "status", value = "状态（0：未上线 1：已上线）", required = true)
    @PathVariable("status") Integer status){
    hospitalService.updateStatus(id, status);
    return R.ok();
}
```


# 二、更新医院状态（前端）

## 1、封装api请求

在api/yygh/hosp.js添加

```js
updateStatus(id, status) {
    return request({
        url: `/admin/hosp/hospital/updateStatus/${id}/${status}`,
        method: 'get'
    })
}
```

## 2、修改/views/hosp/list.vue组件

```javascript
<el-table-column label="操作" width="230" align="center">
    <template slot-scope="scope">
        <router-link :to="'/hospSet/hospital/show/'+scope.row.id">
            <el-button type="primary" size="mini">查看</el-button>
        </router-link>
        <router-link :to="'/hospSet/hospital/schedule/'+scope.row.hoscode">
            <el-button type="primary" size="mini">排班</el-button>
        </router-link>

        <el-button v-if="scope.row.status == 1"  type="primary" size="mini" @click="updateStatus(scope.row.id, 0)">下线</el-button>
        <el-button v-if="scope.row.status == 0"  type="danger" size="mini" @click="updateStatus(scope.row.id, 1)">上线</el-button>
    </template>
</el-table-column>
```

添加调用方法

```js
updateStatus(id, status) {
    hospApi.updateStatus(id, status)
        .then(response => {
        this.fetchData(this.page)
    })
}
```
