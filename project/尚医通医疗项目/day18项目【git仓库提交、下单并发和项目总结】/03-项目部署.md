# 一、项目部署

## 1、项目部署流程

![](assets/744e276c-edfd-4d97-bb43-cef3dee1680a-20220306205018-quh60br.jpg)

![](assets/f25be205-0f5d-4972-a2b1-a21630f3463a-20220306205018-poeatyb.jpg)

## 2、项目打包

打开idea，找到maven，选择父工程里面 Lifecycle -- package 进行打包

![](assets/fd9c9a9d-9005-4040-a87a-3a514ed5b2bc-20220306205018-akoifpv.png)

**执行package之后，出现Bulid SUCCESS打包成功**

![](assets/9755cee7-9825-457b-8d4d-10fdf53f3956-20220306205018-cakit5a.png)

## 3、制作镜像

### 3.1 编写Dockerfile文件

```dockerfile
FROM openjdk:8-jdk-alpine
VOLUME /tmp
ADD ./service_oss-0.0.1-SNAPSHOT.jar service_oss.jar
ENTRYPOINT ["java","-jar","/service_oss.jar", "&"]
```

### 3.2 上传jar包和Dockerfile文件

![](assets/83c8f70f-31f2-4db9-8e17-b536e7856d98-20220306205018-8f2okxd.png)

### 3.3 进入Dockerfile所在目录

**执行命令制作镜像：**

**docker build -t service-oss:1.0.0 .**

![](assets/0deaa17b-491e-4273-9300-fa881b9f02fe-20220306205018-obqfjgt.png)

**容器启动测试：**

注：项目需要nacos环境，需要启动nacos服务，可以在Liunx中安装启动

**docker run -d -p 8205:8205 service-oss:1.0.0 -t**

![](assets/653d0a6b-defa-4b3b-937b-5eb8b39a2cd0-20220306205018-eogr83c.png)

**访问测试：**

![](assets/a42647dc-fc9c-437d-a852-2b3c5aca57c9-20220306205018-fhc5dwh.png)

## 4、上传镜像

### 4.1 登录阿里云，搜索容器镜像服务 ACR

![](assets/b5e5b846-9d15-4143-a308-97ef1ecb316b-20220306205018-71kwqay.jpg)

### 4.2 进入管理控制台，选择个人版

![](assets/717d8336-80a6-4b97-8311-bb2cf376cfc3-20220306205018-dope78i.png)

![](assets/e46fa717-ed20-439c-bc3b-3c30c6566cd2-20220306205018-551qguj.png)

### 4.3 创建命名空间

![](assets/0984024f-feba-4ce9-a1af-986219f0c069-20220306205018-ixxo66q.png)

### 4.4 创建镜像仓库

![](assets/95926926-25cc-4635-8ef3-042a7894a514-20220306205018-caglmky.png)

![](assets/b8020063-a6e3-4386-a1cd-c952095f17db-20220306205018-03ijenv.png)

### 4.5 推送镜像（按照文档命令操作）

![](assets/08670ce8-8ffa-4fec-bde8-c326bda91131-20220306205018-4200pyd.png)

![](assets/ca91ae8f-e191-480d-a08f-938c54a78ad6-20220306205018-u98emb5.png)

### 4.6 下载镜像

**docker pull registry.cn-hangzhou.aliyuncs.com/yygh/service:1.0.0**

![image.png](assets/image-20220306205307-c8dipc7.png)
